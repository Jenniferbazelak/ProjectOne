<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset="UTF-8">
	<meta name ="viewport" content="width-device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	
	<title>My Google Map</title>
	<style>
		#map
		{
			height: 400px;
			width: 100%;
		}
	</style>
</head>
<body>

<h1>My Google Map</h1>
<div id="map"></div>
<script>
	function initMap() 
	{
		// map options
		var options = {
			zoom: 14,
			center: {lat: 30.2457,lng:-97.7688}
		}
		// new map
		var map = new 
		google.maps.Map(document.getElementById('map'), options);

		var mySpot = {lat:30.2918274,lng:-97.78914559999998};

		var marker = new google.maps.Marker({
    	position: mySpot,
    	map: map
  		});
  		marker.addListener('click', function()
		 {
		 	infoWindow.open(map,marker);
		 });
	

		infoWindow = new google.maps.InfoWindow;

            // Try HTML5 geolocation.

            if (navigator.geolocation) 
            {

                navigator.geolocation.getCurrentPosition(function (position) 
                {

                    var pos = 
                    {

                        lat: position.coords.latitude,

                        lng: position.coords.longitude

                    };



                    infoWindow.setPosition(pos);

                    infoWindow.setContent('Current Location.');

                    infoWindow.open(map);

                    map.setCenter(pos);

                }, function () 
                {

                    handleLocationError(true, infoWindow, map.getCenter());

                });

            } 
            else 
            {

                // Browser doesn't support Geolocation

                handleLocationError(false, infoWindow, map.getCenter());

            }

            		// add marker array
		// console.log('this works1');
		// var markers = [
		//  {coords:{lat:30.2499,lng:-97.73785199999998}
		//  	,iconImage:'https://developers.google.com/maps/documentation/examples/full/images/beachflag.png',
		//  	content:'<h1>dog park 1</h1>'
		//  },
		//  {coords:{lat:30.2862,lng:-97.7394}
		//  	,iconImage:'https://developers.google.com/maps/documentation/examples/full/images/beachflag.png',
		//  	content:'<h1>main building</h1>'
		//  }
		//  ];

		//  console.log('thisworks2');

		//  for(var i = 0;i < markers.length;i++)
		//  {
  //       	// Add marker
  //       	addMarker(markers[i]);
  //       	console.log('this works3');
  //       	console.log(map);
  //     	}

		 
		
		 //add marker function
		 function addMarker(props)
		 {
		 	var marker = new google.maps.Marker({
				position:props.coords,
				map:map,

				icon:props.iconImage
			 });
			 //check for marker function
			 console.log('this works');
		 if(props.iconImage){
		 	//set icon image
		 	marker.setIcon(props.iconImage)
		 }
		 // check contant
		 if(props.content)
		 {
		 	var infoWindow = new google.maps.InfoWindow({
		 		content:props.content
		 	})
		 }

		 marker.addListener('click', function()
		 {
		 	infoWindow.open(map,marker);

		 });
		 marker.setMap(map);
	  }
        }



        function handleLocationError(browserHasGeolocation, infoWindow, pos) {

            infoWindow.setPosition(pos);

            infoWindow.setContent(browserHasGeolocation ?

                'Error: The Geolocation service failed.' :

                'Error: Your browser doesn\'t support geolocation.');

            infoWindow.open(map);

        }

		



	
</script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB0N9-tpLZLryr1_wcWc2EGbNcqnwRbQG0&callback=initMap">
    </script>


</body>
</html>